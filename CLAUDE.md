# Gas Town Helper - Agent Instructions

This repository contains setup scripts for Gas Town tmux configuration.

## Quick Reference

### Install or update tmux config (one command)

```bash
curl -fsSL https://raw.githubusercontent.com/erkantaylan/gastown-helper/master/install-tmux.sh | bash
```

The installer is fully self-contained. It:
- Asks 4 questions (mayor name, display prefs, Telegram, second bar)
- Writes runtime scripts to `~/.local/share/gt-tmux/`
- Generates `~/.config/tmux/tmux.conf` based on answers
- Reloads tmux if running

Re-run the same command to update. It detects existing config and offers to keep settings.

### Reload tmux config

```bash
tmux source-file ~/.config/tmux/tmux.conf
```

## Files

| File | Purpose |
|------|---------|
| `install-tmux.sh` | All-in-one installer — embeds all runtime scripts |
| `tmux.conf` | Reference template (real config generated by installer) |
| `setup-town.sh` | Full OS-level Gas Town setup (delegates tmux to installer) |

### Installed at runtime (by installer)

| Location | Purpose |
|----------|---------|
| `~/.local/share/gt-tmux/tmux-anti-override.sh` | Clears Gas Town session-level overrides every 5s |
| `~/.local/share/gt-tmux/tmux-status-right.sh` | Line 1 right — filters gt status (strips rig LEDs) |
| `~/.local/share/gt-tmux/tmux-rig-status.sh` | Line 2 — rig names with status icons |
| `~/.local/share/gt-tmux/claude-statusline.sh` | Claude Code status line helper |
| `~/.config/gt-tmux/config` | Saved preferences (sourced on re-install) |
| `~/.gt-mayor-name` | Mayor display name |
| `~/.config/tmux/tmux.conf` | Generated tmux config |

## Requirements

- `tmux` (terminal multiplexer)
- `python3` (for status parsing)
- `gt` CLI (Gas Town binary — for status display)

## Troubleshooting

### Status bar shows "gt: offline"

The `gt` CLI is not running or not in PATH. Ensure Gas Town is set up.

### Colors wrong on some terminals

Re-run the installer — it applies color fixes during setup.

### Gas Town keeps overriding the status bar

The `tmux-anti-override.sh` script (called via `#()` in status-right) automatically clears session-level overrides every 5 seconds. If it's not working, verify the script exists at `~/.local/share/gt-tmux/tmux-anti-override.sh`.
